<!DOCTYPE html>
<html>
<head>
</head>
	<style>
        @keyframes flip-n-slide-1 {
            from {
                margin-left: 0px;
                transform: rotateY(0deg);
                }
            to {
                margin-left: 150px;
                transform: rotateY(90deg);
                }
            }
        @-webkit-keyframes flip-n-slide-1 {
                from {
                    margin-left: 0px;
                    transform: rotateY(0deg);
                }
                to {
                    margin-left: 150px;
                    transform: rotateY(90deg);
                }
            }
			.flipping-1 {

                animation: flip-n-slide-1 0.5s ease;
            }
            .flipping-2 {
                animation: flip-n-slide-2 0.5s ease forwards;
            }
			@keyframes flip-n-slide-2 {
                from {
                    margin-left: 150px;
                    transform: rotateY(90deg);
                }
                to {
                    margin-left: 300px;
                    transform: rotateY(180deg);
                }
			}
			
			
			@keyframes flip-n-slide-3 {
            from {
				
                margin-left: 300px;
                transform: rotateY(180deg);
                }
            to {
                margin-left: 150px;
                transform: rotateY(90deg);
                }
            }
        @-webkit-keyframes flip-n-slide-3 {
                from {
                    margin-left: 300px;
                    transform: rotateY(180deg);
                }
                to {
                    margin-left: 150px;
                    transform: rotateY(90deg);
                }
            }
			.flipping-3 {

                animation: flip-n-slide-3 0.5s ease;
            }
            .flipping-4 {
                animation: flip-n-slide-4 0.5s ease forwards;
            }
			@keyframes flip-n-slide-4 {
                from {
                    margin-left: 150px;
                    transform: rotateY(90deg);
                }
                to {
                    margin-left: 0px;
                    transform: rotateY(0deg);
                }
			}
	
	body{
		background-image: url(table_card.jpg);
		max-width: 100%;
		height: auto;
	
	}
	.scene {
	  width: 200px;
	  height: 260px;
	  margin: 40px 0;
	  perspective: 600px;
	}

	.card {
	  width: 100%;
	  height: 100%;
		
	  cursor: pointer;
	  position: relative;
	}

	.card__face--front {
	  background: red;
	}

	.card__face--back {
	  background: blue;
	}
	</style>
	
	<script>
	var flag = 0;
	function func1() {
	const card = document.getElementById('card');
                card.addEventListener('click', _ => { if (flag == 0) {
						const halfCallback = function() {
							card.removeEventListener("webkitAnimationEnd", this,false);
							card.removeEventListener("animationend", this,false);
							card.removeEventListener("oanimationend", this,false);
							card.classList.remove('flipping-1');
							card.classList.remove('card__face--front');
							card.classList.add('card__face--back');
							card.classList.add('flipping-2');
						}
						card.addEventListener("webkitAnimationEnd", halfCallback,false);
						card.addEventListener("animationend", halfCallback,false);
						card.addEventListener("oanimationend", halfCallback,false);
						card.classList.add('flipping-1');
						flag = 1;
						}
					else {
						const newhalfCallback = function() {
							card.removeEventListener("webkitAnimationEnd", this,false);
							card.removeEventListener("animationend", this,false);
							card.removeEventListener("oanimationend", this,false);
							card.classList.remove('flipping-3');
							card.classList.remove('card__face--back');
							card.classList.add('card__face--front');
							card.classList.add('flipping-4');
						}
						card.addEventListener("webkitAnimationEnd", newhalfCallback,false);
						card.addEventListener("animationend", newhalfCallback,false);
						card.addEventListener("oanimationend", newhalfCallback,false);
						card.classList.add('flipping-3');
						flag = 0;
					}
					});
					
	}

	</script>
<body>
<div class="scene scene--card" >
	<div class="card">
		<div id = "card" class = "card card__face--front" onclick = "func1()"></div>
	</div>
</div>
</body>
</html>